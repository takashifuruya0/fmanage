{% extends "kakeibo/base.html" %}
{% load humanize %}
{% load web_template %}
{% block title %}
    Entry Edit {{entry.stock}}
{% endblock %}

{% block body %}
<div class="container-fluid">
	<div class="row">
		<div class="col-12 col-sm-6">
			<form method="post" action="">
				<h4>
					<i class="fas fa-paw"></i>Entry Edit
				</h4>
				<table class="table table-responsive">
					{{form}}
				</table>
				{%csrf_token%}
				<button type="submit" class="btn btn-outline-info">
	        <i class="fas fa-check"></i> Submit
	      </button>
				<a href="{%url 'web:entry_detail' pk=entry.pk%}" class="btn btn-outline-secondary">
					<i class="fas fa-backward"></i> Back
				</a>
			</form>
		</div>
		<div class="col-12 col-sm-6">
			<h5>Order Overview</h5>
			<table class="table">
				<tr>
					<th>買付口数</th>
					<th>買付平均</th>
					<th>現在株価</th>
					<th>売付口数</th>
					<th>売付平均</th>
				</tr>
				<tr>
					<td>{{entry.num_buy |intcomma}}</td>
					<td>
						{% if entry.stock.is_trust %}
						{{entry.val_buy |yen:4}}
						{% else %}
						{{entry.val_buy |yen}}
						{% endif %}
					</td>
					<td>{{entry.stock.current_val |yen:4}}</td>
					<td>{{entry.num_sell |intcomma}}</td>
					<td>
						{% if entry.stock.is_trust %}
						{{entry.val_sell |yen:4}}
						{% else %}
						{{entry.val_sell |yen}}
						{% endif %}
					</td>
				</tr>
			</table>
			<hr>
			<h5>
				Entry Overview
				{% include 'web/part/entry_close_status.html' %}
			</h5>
			<table class="table">
				<tr>
					<th>銘柄</th>
					<td>{{entry.stock}}</td>
				</tr>
				<tr>
					<th>Open Date</th>
					<td>{{entry.date_open |default_if_none:"-"}}</td>
				</tr>
				<tr>
					<th>Close Date</th>
					<td>{{entry.date_close |default_if_none:"-"}}</td>
				</tr>
				<tr>
					<th>保有口数</th>
					<td>{{entry.remaining |intcomma}}</td>
				</tr>
				<tr>
					<th>利益</th>
					<td>{{entry.profit |yen |safe}}</td>
				</tr>
				<tr>
					<th>保有期間</th>
					<td>{{entry.holding_period}}日</td>
				</tr>
			</table>
		</div>
	</div>
</div>
{% endblock %}